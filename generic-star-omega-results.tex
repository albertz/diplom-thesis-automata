\section{General results}
\label{general-results}

%S401: TODO

Let $\Lang$ be a $*$-language class.

\subsection{general}
\label{gen:general}
Let $L,A,B \in \Lang$.
\begin{enumerate}
\item $\ext L = L \cdot \Sigma^\omega$
\item $\ext L = \lim L \cdot \Sigma^*$ %S303
\item $\ext L = \dlim L \cdot \Sigma^*$ %S303, S305.4
\item $- \lim(-L) = \dlim L$
\item $\dlim L \subseteq \lim L$
\item $\lim A \cup \lim B = \lim A \cup B$ \newline %S305.4
Proof:
\begin{align*}
& \alpha \in \lim A \cup \lim B \\
\Leftrightarrow \ & \existsinf n \colon \alpha[0,n] \in A \ \vee \ \existsinf n \colon \alpha[0,n] \in B \\
\Leftrightarrow \ & \existsinf n \colon \alpha[0,n] \in A \cup B \\
\Leftrightarrow \ & \alpha \in \lim A \cup B
\end{align*}
\item $\dlim A \cup \dlim B \subseteq \dlim A \cup B$ \newline %S305.4
Proof:
\begin{align*}
& \alpha \in \dlim A \cup \dlim B \\
\Leftrightarrow \ & \exists N \colon \forall n \ge N \colon \alpha[0,n] \in A \ \vee \ 
\exists N \colon \forall n \ge N \colon \alpha[0,n] \in B \\
\Rightarrow \ & \exists N \colon \forall n \ge N \colon \alpha[0,n] \in A \cup B
\end{align*}
There is no equality in general: $A = (00)^*$, $B = (00)^*0$.
\end{enumerate}

\

%S302.1:
We are interested in relations like $\BC \ext \Lang \overset{?}{\subsetneqq} \BC \lim \Lang$ or $\ext \Lang \overset{?}{\subsetneqq} \lim \Lang$. With $\Lang = \Set{\Set{a}}$, we realize that even $\ext \Lang \subseteq \lim \Lang$ is not true in general ($\ext \Set{\Set{a}} = \Set{a \Sigma^\omega} \neq \emptyset = \lim \Set{\Set{a}}$). In \ref{gen:non-suffix-sens}, we see a sufficient condition for this property, though.

\subsection{non suffix sensitive}
\label{gen:non-suffix-sens}

% S303, S101a:
If E1 ($\forall L \in \Lang \colon L \cdot \Sigma^* \in \Lang$, i.e. $\Lang$ is non suffix sensitive) holds for $\Lang$: For $L \in \Lang$, we have $\ext L = \lim L \Sigma^* = \dlim L \Sigma^*$ and thus
\[ \ext \Lang \subseteq \lim \Lang \cup \dlim \Lang . \]

\subsection{$\BC \ext \subseteq \BC \lim$}
\label{gen:S302a}

%S302:
From $\ext \Lang \subseteq \lim \Lang$, it directly follows $\Set{-\ext L}{L \in \Lang} \subseteq \Set{-\lim L}{L \in \Lang}$. Thus, it also follows
\[ \BC \ext \Lang \subseteq \BC \lim \Lang . \]

\subsection{$\dext \subset \dlim$}

%S302:
From $\ext \Lang \subseteq \lim \Lang$, we need E3 ($\Lang$ closed under negation) to get $\dext \Lang \subseteq \dlim \Lang$. This is in contrast to \ref{gen:S302a}, where it directly follows. We have to be careful about the difference $- \ext \Lang \neq \dext \Lang$ (in general, if E3 does not hold). 

\subsection{union, intersection}
%S303:
\begin{itemize}
\item
E2a (closed under union) $\Rightarrow \bigcup \ext \Lang \subseteq \ext \Lang$.
\item
E2b (closed under intersection) $\Rightarrow \bigcap \ext \Lang \subseteq \ext \Lang$.
\end{itemize}

\subsection{$op \cup \overline{op} \subsetneqq \BC op$}
If there is $L_\Sigma \in \Lang_\Sigma$ with $L_\Sigma \in \ext \Lang_\Sigma, L_\Sigma \not\in \dext \Lang_\Sigma$ and E3 (closed under negation) holds for $\Lang$:
\begin{itemize}
\item[$\Rightarrow$] $-L_\Sigma \in \dext \Lang_\Sigma, -L_\Sigma \not\in \ext \Lang_\Sigma$
\item[$\Rightarrow$] $L_{\Sigma_1} \cup -L_{\Sigma_2} \in \BC \ext \Lang_{\Sigma_1 \dot{\cup} \Sigma_2}$ \newline
$L_{\Sigma_1} \cup -L_{\Sigma_2} \not\in \ext \cup \dext \Lang_{\Sigma_1 \dot{\cup} \Sigma_2}$
\end{itemize}
Thus, $\ext \cup \dext \Lang \subsetneqq \BC \ext \Lang$.

Similarily, if there is $L_\Sigma \in \lim \Lang_\Sigma, L_\Sigma \not\in \dlim \Lang_\Sigma$ and E3 holds for $\Lang$:
\begin{itemize}
\item[$\Rightarrow$] $-L_\Sigma \in \dlim \Lang_\Sigma, -L_\Sigma \not\in \lim \Lang_\Sigma$
\item[$\Rightarrow$] $L_{\Sigma_1} \cup -L_{\Sigma_2} \in \BC \lim \Lang_{\Sigma_1 \dot{\cup} \Sigma_2}$ \newline
$L_{\Sigma_1} \cup -L_{\Sigma_2} \not\in \lim \cup \dlim \Lang_{\Sigma_1 \dot{\cup} \Sigma_2}$
\end{itemize}
Thus, $\lim \cup \dlim \Lang \subsetneqq \BC \lim \Lang$.


\subsection{$\BC \ext = \lim \cap \dlim$}
\label{gen:staiger-wagner}
%S405:
A Staiger-Wagner automaton (weak Muller automaton) is of the same form $\A = (Q,\Sigma,q_0,\delta,\F)$ as a Muller automaton with the acceptance condition that a run $\rho$ is accepting if and only if $\Occ(\rho) := \Set{q \in Q \colon \text{q occurs in } p} \in \F$.  (R101,Def.61,p.43)

We see (R101,Th.63+64,p.44) that the class of Staigner-Wagner-recognized languages is exactly the class $\BC \ext \Lang^*(reg)$ and also $\lim \cap \dlim \Lang^*(reg)$.

We are now formulating a more general and direct proof for the $\BC \ext \Lang = \lim \cap \dlim \Lang$ equality without Staiger-Wagner-automata.

%S305:
First, we show $\lim \cap \dlim \Lang \subseteq \BC \ext \Lang$.

Let $\tilde L \in \lim \cap \dlim \Lang$, i.e. there are deterministic automaton $\A$ and $\overline \A$ so that $L^\omega_{\text{B"uchi}}(\A) = L^\omega_{\text{co-B"uchi}}(\overline \A) = \tilde L$. Let $Q,\overline Q$ be the states of $\A,\overline \A$. Now look at the product automaton $\A \times \overline \A$ with states $Q \times \overline Q$ and final states $F \times \overline F \subseteq Q \times \overline Q$.

Let $(q,\overline q) \in Q \times \overline F$. If $\overline q$ is not part of a loop in $\A$, we can just take it away from $\overline F$ and get the same $\omega$-language (no matter if Büchi or co-Büchi). Thus assume that all $\overline q \in \overline F$ are part of a loop.

Let $\alpha \in \tilde L$. Then $\rho(\alpha)$ has infinity many occurences in $F$ and there is some $N$ so that $\overline \rho(\alpha)[N,\infty)$ is only in $\overline F$. Let $\beta \not\in \tilde L$. Then there is some $N$ so that $\rho(\alpha)[N,\infty)$ is only in $Q-F$.

In $\A \times \overline \A$, we have
\begin{align*}
& \alpha \in \tilde L \\
\Leftrightarrow \ & \forall N \colon \exists n \ge N \colon \overx{\rho}(\alpha)[n] \in F \times \overline Q \\
\Leftrightarrow \ & \exists N \colon \forall n \ge N \colon \overx{\rho}(\alpha)[n] \in Q \times \overline F
\end{align*}

Look at strongly connected component (SCC) $S$ in $\A \times \overline \A =: \Ax$. We have $S \cap F \times \overline Q \neq \emptyset$, iff $S$ accepts. It follows $S \cap Q \times \overline F = S$.

Single $\overx{q} \in \overx{Q}$ which are not part of a SCC can be ignored. For the acceptance of infinte words, only SCCs are relevant. For $S$, define $S_+ := \Set{\overx{q} \in \overx{Q}-S}{\overx{q} \text{ can be visited after } S}$.

%S406.1: TODO...
%S402: TODO...

\subsection{Kleene-star $= \BC \lim$}
\label{gen:kleene-star}
%S407

%S306:
