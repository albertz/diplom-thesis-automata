\section{Background results on regular $\omega$-languages}
\label{chapter:regOmegaLangs}

\subsection{Preliminaries}
We introduce some common terminology used in this thesis.

The set of natural numbers $1,2,3,\dots$ is denoted by $\N$, likewise $0,1,2,3,\dots$ by $\N_0$. $\Power(M)$ is the set of all subsets of $M$, sometimes also written as $2^M$, defined as $\Set{S}{S \subseteq M}$. $-M$ denotes all elements which are not in $M$, defined as $\Set{x}{x \not\in M}$ (the superset of $M$ is determined by the context). Given two functions $\operatorname{f} \colon X \rightarrow Y$, $\operatorname{g} \colon Y \rightarrow Z$, we often leave away parentheses and write $\operatorname{g} \operatorname{f} x$ instead of $\operatorname{g}(\operatorname{f}(x))$ as long as there is no ambiguity.

An \defword{alphabet} is a finite set of \defword{symbols}. We usually denote an alphabet by $\Sigma$ and its elements by $a, b, c, \dots$. A finite sequence of elements in $\Sigma$ is also called a \defword{finite word}, often named $u, v, w, \dots$. The set of such words, including the \defword{empty word} $\epsilon$, is denoted by $\Sigma^*$. Likewise, $\Sigma^+$ is the set of non-empty words. Infinite sequences over $\Sigma$ are called \defword{infinite words}, often named $\alpha, \beta$. The set of such infinite words is denoted by $\Sigma^\omega$.

A subset $L \subseteq \Sigma^*$ is called a \defword{language} of finite words or also called a \defword{$*$-language}. Likewise, a subset $\tilde L \subseteq \Sigma^\omega$ is called an \defword{$\omega$-language}.

A set $\Lang$ of $*$-languages is called a \defword{$*$-language class}. Likewise, a set $\Lang^\omega$ of $\omega$-languages is called a \defword{$\omega$-language class}.

We can \defword{concatenate} finite words with each other and also finite words with infinite words. For languages $L_1 \subseteq \Sigma^*$, $L_2 \subseteq \Sigma^*$, $\tilde L_3 \subseteq \Sigma^\omega$, we define the concatenation $L_1 \cdot L_2 := \Set{v \cdot w}{v \in L_1, w \in L_2}$ and $L_1 \cdot \tilde L_3 := \Set{v \cdot \alpha}{v \in L_1, \alpha \in \tilde L_3}$. In some cases, we might leave away the concatenation dot and just write $L_1 L_2$ or $L_1 \tilde L_3$. Exponentation of languages is defined naturally: For $L \subseteq \Sigma^*$, we define $L^0 := \Set{\epsilon}$ and $L^{i+1} := L^i \cdot L$ for all $i \in \N_0$. The union of all such sets, is called the \defword{Kleene star} operator, defined as $L^* := \cup_{i\in\N_0} L^i$. The \defword{positive Kleene star} is defined as $L^+ := \cup_{i\in\N} L^i$. The \defword{$\omega$-Kleene star} is defined by $L^\omega := \Set{w_1 \cdot w_2 \cdot w_3 \cdots}{w_i \in L, w_i \ne \epsilon}$.

\subsection{The class of regular $*$-languages}
\label{intro:reglang}

A \defword{regular expression} is representing a language over an alphabet $\Sigma$. Regular expressions are defined recursively based on the ground terms $\emptyset$, $\epsilon$ and $a$ for $a \in \Sigma$ denoting the languages $\emptyset$, $\Set{\epsilon}$ and $\Set{a}$. Then, if $r$ and $s$ are regular expressions representing $R, S \subseteq \Sigma^*$, then also $r+s$ (written also as $r|s$, $r \vee s$, $r \cup s$), $r s$ (written also as $r \cdot s$) and $r^*$ are regular expressions, representing $R \cup S$, $R \cdot S$ and $R^*$. Let $\Lang^*(\text{RE})$ be the set of languages which can be represented as regular expressions.

We extend these expressions also by $r \wedge s$ (written also as $r \cap s$) and $-r$ (written also as $\neg r$), representing the language $R \cap S$ and $-R := \Set{w \in \Sigma^*}{w \not\in R}$. Some basic result of the study of formal languages, as can be seen in e.g. \cite{FinAutLogR109}, is the equivalence of the class of these extended regular expression languages and $\Lang^*(\text{RE})$.

A \defword{non-deterministic} \defword{finite-state automaton} (NFA) $\A$ over an alphabet $\Sigma$ is given by a finite set $Q$ of \defword{states} and a subset $\Delta \subseteq Q \times \Sigma \times Q$ of \defword{transitions}. In most cases we also have an \defword{initial states} $q_0 \in Q$ and a subset $F \subseteq Q$ of \defword{final states}.

We write:
\[ \A = (Q, \Sigma, q_0, \Delta, F). \]

The automaton is \defword{deterministic} (a DFA) iff $\Delta$ is a function $Q \times \Sigma \rightarrow Q$. In that case, we often call the function $\delta$ and we write
\[ \A = (Q, \Sigma, q_0, \delta, F). \]

Two transitions $(p,a,q), (p',a',q') \in \Delta$ are \defword{consecutive} iff $q=p'$.

A \defword{run} in the automaton $\A$ is a finite sequence of consecutive transitions, written as:
\[ q_0 \xrightarrow{a_0} q_1 \xrightarrow{a_1} q_2 \cdots \]

An automaton $\A = (Q, \Sigma, q_0, \Delta, F)$ \defword{accepts} a finite word $w = (a_0,a_1,\dots,a_n) \in \Sigma^*$ iff there is a run $\rho := q_0 \xrightarrow{a_0} q_1 \xrightarrow{a_1} q_2 \cdots \xrightarrow{a_n} q_{n+1}$ with $q_{n+1} \in F$. We say that the run $\rho$ \defword{matches} the word $w$.

The $*$-language $L^*(\A)$ is defined as set of all finite words which are accepted by $\A$.

The set of $*$-languages accepted by a NFA is called $\Lang^*(\text{NFA})$. Likewise, $\Lang^*(\text{DFA})$ is the set of $*$-languages accepted by a DFA. A basic result (see for example \cite{FinAutLogR109} or \cite{InfWordsR110}) is
\[ \Lang^*(\text{DFA}) = \Lang^*(\text{NFA}) = \Lang^*(\text{RE}) . \]

This class of $*$-languages is called the class of \defword{regular $*$-languages}. We name it $\Langreg$ from now on.



\subsection{The class of regular $\omega$-languages}
\label{reg-omega-lang}

The class of regular $\omega$-languages can be defined in many different ways. We will use one common definition and show some equivalent descriptions.
\[ \LangOreg := \Set{ \bigcup_{i=1}^n\ U_i \cdot V_i^\omega }{ U_i, V_i \in \Langreg, n \in \N_0 } \]

This is also called the \defword{$\omega$-Kleene closure}.

\subsubsection{$\omega$ regular expressions}

For a regular expression $r$ representing a $*$-language $R\subseteq \Sigma^*$, we can introduce a corresponding $\omega$ regular expression $r^\omega$ which represents the $\omega$-language $R^\omega$. This $\omega$ regular expression can be combined with other $\omega$ regular expressions as usual and prefixed by standard regular expressions. We call all these combinations $\omega$ regular expressions.

We see that $\LangOreg$ is closed under union (obviously), intersection and complement.

Thus, the class of languages accepted by $\omega$ regular expressions is exactly $\LangOreg$.


\subsubsection{$\omega$-automata}

A different, very common description is in terms of automata.

An automaton $\A = (Q, \Sigma, q_0, \Delta, F)$ \defword{Büchi-accepts} an infinite word $\alpha = (a_0,a_1,a_2,...) \in \Sigma^\omega$ iff there is an infinite run $q_0 \xrightarrow{a_0} q_1 \xrightarrow{a_1} q_2 \xrightarrow{a_2} q_3 \cdots$ in $\A$ with $\Set{ i \in \N_0 }{ q_i \in F }$ infinite, i.e. which reaches a state in $F$ infinitely often.

The language $L^\omega(\A)$ is defined as the set of all infinite words which are Büchi-accepted by  $\A$. To make clear that we use the Büchi acceptance condition, we sometimes will also write $L^\omega_\text{Büchi}(\A)$.

A basic result of the study of this language class is: The set of all languages accepted by a non-deterministic Büchi automaton is exactly $\LangOreg$ (see \cite{InfCompR101} or others). %S218
Deterministic Büchi automata are less powerful, e.g. they cannot recognise the language $(a+b)^* b^\omega$.

There are some different forms of $\omega$-automata which differ in their acceptance condition. Noteable are the \defword{Muller condition}, the \defword{Rabin condition}, the \defword{Streett condition} and the \defword{Parity condition}. With such an acceptance condition, we call it \defword{Muller automaton}, etc. The \emph{main theorem of $\omega$-automata} states:
\begin{itemize}
\item Non-deterministic Büchi automata,
\item a boolean combination of deterministic Büchi automata,
\item deterministic Muller automata,
\item deterministic Rabin automata,
\item deterministic Streett automata,
\item deterministic Parity automata
\end{itemize}
all recognize the same class of languages. See \cite{InfCompR101}, \cite{LangAutLogicR102}, \cite{InfWordsR110} and others. The main part of this theorem is \defword{McNaughton's Theorem} which states the equivalence of non-deterministic Büchi automata and deterministic Muller automata.
%S407

Muller automata are interesting for us in the rest of this thesis. The acceptance component of a Muller automaton is a set $\F \subseteq 2^Q$, also called the \defword{table} of the automaton (instead of a single set $F \subseteq Q$). A word $w \in \Sigma^\omega$ is accepted iff there is an infinite run $\rho$ with $\Inf(\rho) \in \F$, where $\Inf(\rho)$ is the set of infinitely often reached states of the run $\rho$.

We write:
\[ \A = (Q, \Sigma, q_0, \Delta, \F) . \]

\subsubsection{Language operators}

Büchi acceptance is closely connected to the language operator
\[ \lim(L) := \Set{ \alpha \in \Sigma^\omega }{ \existsinf n \colon \alpha[0,n] \in L } . \]
We define the language class operator
\[ \lim(\Lang) := \Set{\lim(L)}{L \in \Lang} . \]
We see that $\lim(\Langreg)$ is equal to the languages accepted by deterministic Büchi automata (\cite{InfCompR101}). %S407
I.e.
\[ \lim \Langreg = \Set{L^\omega_\text{Büchi}(\A)}{\text{$\A$ is det. Büchi automaton}} . \]
Thus,
\[  \BC \lim \Langreg = \LangOreg , \]
where $\BC \mathcal{X}$ is defined as all \defword{boolean combinations} (union, intersection, complement) from $\mathcal{X}$. Formally: $\BC$ is defined as a function
\[ \BC \colon \Power(\mathcal{W}) \rightarrow \Power(\mathcal{W}) \]
where $\mathcal{W}$ is usually $\Power(\Sigma^\omega)$. Then, $\BC(\mathcal{X})$ is defined as the smallest set with
\begin{itemize}
\item $\mathcal{X} \subseteq \BC \mathcal{X}$,
\item $-X \in \BC \mathcal{X}$ for all $X \in \BC \mathcal{X}$,
\item $X_1 \cup X_2 \in \BC \mathcal{X}$ for all $X_1,X_2 \in \BC \mathcal{X}$,
\item $X_1 \cap X_2 \in \BC \mathcal{X}$ for all $X_1,X_2 \in \BC \mathcal{X}$.
\end{itemize}
$\mathcal{W}$ is always determined from the context. We normally have $\mathcal{W} = \Power(\Sigma^\omega)$, i.e. the set of all $\omega$-languages. Then, $\BC$ is an operator on $\omega$-language classes. We could also have $\mathcal{W} = \Power(\Sigma^*)$, then $\BC$ would be an operator on $*$-language classes. Note that we never have $\mathcal{W} = \Power(\Sigma^* \cup \Sigma^\omega)$ in this thesis. This note is important as the $\BC$ operator would be ambiguous otherwise.

% TODO: ref
Another classification is
\[ \LangOreg = \Set{ \bigcup_{i=0}^n U_i \cdot \lim V_i }{ U_i, V_i \in \Langreg, n \in \N_0 } . \]

\subsubsection{Logic on infinite words}
% TODO: more
%(S218,S411,R107)
Let $L_2(\Sigma)$ be the set of formulas $\operatorname{MSO}(<)$ over $\Sigma$. The interpretation of such formulas over infinite words is straight-forward. In \cite[Theorem 3.1]{CombR107}, we can see that
\[ \LangOreg = \Set{A \subseteq \Sigma^\omega}{A \text{ definable in } L_2(\Sigma)} . \]
% in R107, similar/same thing for Langreg
% In \cite[]{FinAutLogR109}, SOM[+1]

\subsubsection{Some properties}

\begin{lemma}
\label{reg:limRegClosedIntersection}
$\lim \Langreg$ is closed under intersection.
\begin{proof}
In \cite[Chapter 12, Remark 12.4]{CAVR112}, this is shown via a special product automata construction of deterministic Büchi automata.
% one proof, via product automata, would be in http://mtc.epfl.ch/courses/CAV_WS2004/12.pdf
% other sources?
\end{proof}
\end{lemma}
